<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
		<style type="text/css">
			*,
			ul {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}
			table{
				width: 600px;
				text-align: center;
				border-collapse: collapse;
			}
			th,td{
				border: 1px solid black;
				padding: 10px;
			}
			.btn{
				padding: 0 5px;
				background-color: #b0b0b0;
				cursor: pointer;
			}
			.btn:hover{
				background-color: #7e7e7e;
			}
		</style>
	</head>
	<body>
		<div id="app">
			<table>
				<thead>
					<tr>
						<th v-for="nav in navs">{{nav}}</th>
					</tr>
				</thead>
				<tbody>
					<tr v-for="(book,index) in books">
						<td>{{index}}</td>
						<td>{{book.name}}</td>
						<td>{{book.data}}</td>
						<td>{{book.price | filterVal}}</td>
						<td>
							<span class="btn" @click="add(index)">+</span>
							<span>{{book.num}}</span>
							<span class="btn" @click="reduce(index)">-</span>
						</td>
						<td><button @click="del(index)">移除</button></td>
					</tr>
				</tbody>
			</table>
			<div>总价格:{{all | filterVal}}</div>
		</div>
		<script type="text/javascript">
			let vm = new Vue({
				el: "#app",
				data: {
					navs:['','书籍名称','出版日期','价格','购买数量','操作'],
					books:[
						{
							name:"算法导论",
							data:"2006-9",
							price:85.00,
							num:0
						},
						{
							name:"UNIX编程艺术",
							data:"2006-2",
							price:59.00,
							num:0
						},
						{
							name:"编程珠玑",
							data:"2008-10",
							price:38.00,
							num:0
						},
						{
							name:"代码大全",
							data:"2006-3",
							price:128.00,
							num:0
						},
						]
				},
				filters:{
					filterVal(price){
						return "$"+ price.toFixed(2)
					}
				},
				computed:{
					all(){
						let prices = 0;
						for(let i of this.books){
							prices += i.price*i.num
						}
						return prices;
					},
				},
				methods: {
					add(index){
						this.books[index].num++;
					},
					reduce(index){
						this.books[index].num--;
					},
					del(index){
							this.books.splice(index,1);
					}
				}
			})
		</script>
	</body>
</html>
